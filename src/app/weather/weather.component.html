<div class="weather" *ngIf="!isLoading">
  <form (ngSubmit)="search()" class="weather__form">
    <mat-form-field class="weather__input">
      <mat-label>Город</mat-label>
      <input
        matInput
        placeholder="Где Вы находитесь?"
        [(ngModel)]="query"
        name="query"
      />
    </mat-form-field>
    <button mat-icon-button type="submit">
      <mat-icon>search</mat-icon>
    </button>
  </form>

  <mat-card class="weather__result" *ngIf="loadedWeather">
    <mat-card-header>
      <img
        mat-card-avatar
        style="border-radius: 0"
        [src]="loadedWeather?.current?.condition?.icon"
      />
      <mat-card-title
        >{{ loadedWeather?.location?.country }},
        {{ loadedWeather?.location?.name }}</mat-card-title
      >
      <mat-card-subtitle>
        {{ loadedWeather?.current?.condition?.text }}
      </mat-card-subtitle>
    </mat-card-header>

    <mat-card-content class="weather__content">
      <div class="weather__temp">
        <span style="font-size: 32px">
          {{ loadedWeather?.current?.temp_c }} °C
        </span>

        <span class="mat-body"
          >Ощущается как {{ loadedWeather.current.feelslike_c }} °C</span
        >
      </div>

      <div class="weather__wind">
        <mat-icon>air</mat-icon>
        <p>{{ loadedWeather.current.wind_kph }} км/ч</p>
        <p>{{ loadedWeather.current.wind_dir }}</p>
        <mat-icon
          inline="true"
          [ngStyle]="{
            transform: 'rotate(' + loadedWeather.current.wind_degree + 'deg)'
          }"
        >
          north
        </mat-icon>
      </div>
    </mat-card-content>
  </mat-card>
</div>

<div
  *ngIf="isLoading"
  style="
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100%;
  "
>
  <mat-spinner></mat-spinner>
</div>
